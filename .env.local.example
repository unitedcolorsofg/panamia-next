# =============================================================================
# Environment Variables Configuration
# =============================================================================
#
# Copy this file to .env.local and fill in the values.
#
# Conventions:
#   - Required vars are uncommented. The app will not start without them.
#   - Optional vars are commented out. Uncomment and fill in to enable.
#   - All values are double-quoted (handles spaces and special characters).
#
# Location annotations:
#   [SECRET] - Store in GitHub Secrets (sensitive, encrypted)
#   [VAR]    - Store in GitHub Variables (non-sensitive, visible in logs)
#   [LOCAL]  - Only needed for local development
#
# See lib/env.config.ts for the canonical source of truth.
# Run `npm run env:check` to validate your configuration.
#
# =============================================================================

# =============================================================================
# DATABASE (Supabase + Drizzle)
# https://supabase.com/docs/guides/database/connecting-to-postgres
# =============================================================================
#
# Supabase provides three connection string types — use the right one:
#
#   DIRECT (unpooled, port 5432):
#     postgresql://postgres:[PASSWORD]@db.[project-ref].supabase.co:5432/postgres
#
#   SESSION POOLER (port 5432 via pooler):
#     postgresql://postgres.[project-ref]:[PASSWORD]@aws-0-[region].pooler.supabase.com:5432/postgres
#
#   TRANSACTION POOLER (port 6543) — DO NOT USE:
#     Transaction mode breaks prepared statements used by postgres.js.
#
# In Cloudflare Workers production, POSTGRES_URL is automatically overridden
# by the HYPERDRIVE binding — it is only used for local dev and CI.
# The Hyperdrive binding ID is NOT an env var; configure it in wrangler.jsonc:
#   "hyperdrive": [{ "binding": "HYPERDRIVE", "id": "<your-hyperdrive-id>" }]
#
# Setup: Supabase dashboard → Project Settings → Database → Connection string

# [SECRET] App runtime connection — use the DIRECT or SESSION POOLER string.
POSTGRES_URL="postgresql://postgres:[PASSWORD]@db.[project-ref].supabase.co:5432/postgres"

# [SECRET] Migration-only connection — always use the DIRECT (unpooled) string.
# Required by `npx drizzle-kit migrate`. Never used by the app itself.
#
# IMPORTANT — Cloudflare build environment:
# Worker runtime secrets are NOT visible during the build step. You must add
# POSTGRES_DIRECT_URL (or POSTGRES_URL as fallback) separately here:
#   Cloudflare dashboard → Workers & Pages → <your app> →
#   Settings → Build → Variables and secrets  (mark as Encrypted)
# drizzle.config.ts falls back to POSTGRES_URL if this is unset.
POSTGRES_DIRECT_URL="postgresql://postgres:[PASSWORD]@db.[project-ref].supabase.co:5432/postgres"

# =============================================================================
# AUTHENTICATION (NextAuth)
# =============================================================================

# [SECRET] NextAuth.js encryption secret — generate with: openssl rand -base64 32
NEXTAUTH_SECRET="your_nextauth_secret_here"

# [VAR] Base URL for NextAuth callbacks
NEXTAUTH_URL="http://localhost:3000"

# =============================================================================
# HOST CONFIGURATION
# =============================================================================

# [VAR] Public-facing site URL
NEXT_PUBLIC_HOST_URL="http://localhost:3000"

# =============================================================================
# ADMIN
# =============================================================================

# [SECRET] Comma-separated list of admin email addresses
ADMIN_EMAILS="admin1@example.com,admin2@example.com"

# =============================================================================
# OAUTH PROVIDERS - Google
# https://console.cloud.google.com/apis/credentials
# =============================================================================

# [VAR] Google OAuth client ID
# GOOGLE_CLIENT_ID="your_google_client_id_here"

# [SECRET] Google OAuth client secret
# GOOGLE_CLIENT_SECRET="your_google_client_secret_here"

# =============================================================================
# OAUTH PROVIDERS - Apple
# https://developer.apple.com/account/resources/identifiers/list/serviceId
# =============================================================================

# [VAR] Apple OAuth client ID (Services ID)
# APPLE_CLIENT_ID="your_apple_client_id_here"

# [SECRET] Apple OAuth client secret (signed JWT)
# APPLE_CLIENT_SECRET="your_apple_client_secret_here"

# =============================================================================
# OAUTH PROVIDERS - Wikimedia
# https://meta.wikimedia.org/wiki/Special:OAuthConsumerRegistration
# =============================================================================

# [VAR] Wikimedia OAuth client ID
# WIKIMEDIA_CLIENT_ID="your_wikimedia_client_id_here"

# [SECRET] Wikimedia OAuth client secret
# WIKIMEDIA_CLIENT_SECRET="your_wikimedia_client_secret_here"

# =============================================================================
# OAUTH PROVIDERS - Mastodon
# Create an application on your Mastodon instance
# =============================================================================

# [VAR] Mastodon instance URL for OAuth (default: https://mastodon.social)
# MASTODON_INSTANCE="https://mastodon.social"

# [VAR] Mastodon OAuth client ID
# MASTODON_CLIENT_ID="your_mastodon_client_id_here"

# [SECRET] Mastodon OAuth client secret
# MASTODON_CLIENT_SECRET="your_mastodon_client_secret_here"

# =============================================================================
# OAUTH PROVIDERS - UI Visibility
# Uncomment and set to "true" to show the sign-in button for each provider.
# Also requires the credentials above to be set.
# =============================================================================

# [VAR] Show Google sign-in button (default: false)
# NEXT_PUBLIC_GOOGLE_ENABLED="true"

# [VAR] Show Apple sign-in button (default: false)
# NEXT_PUBLIC_APPLE_ENABLED="true"

# [VAR] Show Wikimedia sign-in button (default: false)
# NEXT_PUBLIC_WIKIMEDIA_ENABLED="true"

# [VAR] Show Mastodon sign-in button (default: false)
# NEXT_PUBLIC_MASTODON_ENABLED="true"

# =============================================================================
# OAUTH PROVIDERS - Trust Level
# Values: "trusted" | "verification-required" | "disabled"
#
# - trusted: Provider verifies email ownership (auto-claim enabled)
# - verification-required: User must verify email before sign-in completes
# - disabled: Provider button greyed out on sign-in page
#
# Defaults apply if unset: Google=trusted, Apple=trusted,
# Wikimedia=verification-required, Mastodon=trusted
# =============================================================================

# [VAR] Google OAuth trust level
# OAUTH_GOOGLE="trusted"

# [VAR] Apple OAuth trust level
# OAUTH_APPLE="trusted"

# [VAR] Wikimedia OAuth trust level
# OAUTH_WIKIMEDIA="verification-required"

# [VAR] Mastodon.social OAuth trust level
# OAUTH_MASTODON_SOCIAL="trusted"

# =============================================================================
# RECAPTCHA
# https://www.google.com/recaptcha/admin
# =============================================================================

# [VAR] Google reCAPTCHA v3 site key (public)
NEXT_PUBLIC_RECAPTCHA_SITE_KEY="your_recaptcha_site_key_here"

# [SECRET] Google reCAPTCHA v3 secret key
RECAPTCHA_SECRET_KEY="your_recaptcha_secret_key_here"

# =============================================================================
# BREVO (Email Service)
# https://app.brevo.com/settings/keys/api
# =============================================================================

# [SECRET] Brevo (Sendinblue) API key
# BREVO_APIKEY="your_brevo_api_key"

# [VAR] Brevo sender email address
# BREVO_SENDEREMAIL="noreply@example.com"

# [VAR] Brevo sender display name
# BREVO_SENDERNAME="Pana MIA"

# [VAR] Brevo environment — "DEV" suppresses real sends (default: DEV)
# BREVO_ENV="DEV"

# =============================================================================
# BLOB STORAGE (Vercel Blob)
# https://vercel.com/dashboard/stores
# =============================================================================

# [SECRET] Vercel Blob storage token
BLOB_READ_WRITE_TOKEN="vercel_blob_rw_xxxx"

# =============================================================================
# PUSHER (Real-time features)
# https://dashboard.pusher.com/
# =============================================================================

# [VAR] Pusher application ID
# PUSHER_APP_ID="your_pusher_app_id"

# [SECRET] Pusher secret
# PUSHER_SECRET="your_pusher_secret"

# [VAR] Pusher key (used by both server and client)
# NEXT_PUBLIC_PUSHER_KEY="your_pusher_key"

# [VAR] Pusher cluster region
# NEXT_PUBLIC_PUSHER_CLUSTER="us2"

# =============================================================================
# STRIPE (Payments)
# https://dashboard.stripe.com/apikeys
# =============================================================================

# [VAR] Stripe publishable key (public)
# NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_your_stripe_publishable_key"

# [SECRET] Stripe secret key
# STRIPE_SECRET_KEY="sk_test_your_stripe_secret_key"

# =============================================================================
# DEVELOPMENT / TESTING
# =============================================================================

# [LOCAL] Development email redirect (safety net)
# When set, ALL outbound emails are sent here instead of real recipients.
# Prevents accidentally emailing real users during development.
# DEV_RECEIVER_EMAIL="your_dev_email@example.com"
